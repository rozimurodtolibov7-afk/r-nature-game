<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>R-Nature: Eco-Voyage</title>
    <style>
        :root { --green: #27ae60; --sky: #a5d6a7; --dark: #1b5e20; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; overflow: hidden; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--sky); }

        #game-container { position: relative; width: 100vw; height: 100vh; background: linear-gradient(to bottom, #81d4fa, #e1f5fe); overflow: hidden; }

        /* HUD */
        #hud { position: absolute; top: 20px; width: 100%; display: flex; justify-content: space-around; z-index: 100; pointer-events: none; }
        .stat { background: rgba(255,255,255,0.8); padding: 10px 20px; border-radius: 15px; font-weight: bold; color: var(--dark); border: 2px solid var(--green); }

        /* Entities */
        #player { position: absolute; bottom: 80px; left: 50px; width: 50px; height: 50px; font-size: 40px; display: flex; align-items: center; justify-content: center; z-index: 50; transition: bottom 0.1s; }
        .obstacle { position: absolute; bottom: 80px; width: 40px; height: 60px; font-size: 35px; z-index: 40; }
        .item { position: absolute; width: 30px; height: 30px; font-size: 25px; z-index: 40; }

        /* Ground */
        #floor { position: absolute; bottom: 0; width: 100%; height: 80px; background: #795548; border-top: 8px solid var(--green); }

        /* Screens */
        .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000; color: white; text-align: center; }
        button { padding: 15px 40px; font-size: 22px; border-radius: 50px; border: none; background: var(--green); color: white; cursor: pointer; font-weight: bold; box-shadow: 0 4px 15px rgba(0,0,0,0.3); transition: 0.3s; }
        button:hover { transform: scale(1.05); background: #2ecc71; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="hud">
        <div class="stat">SCORE: <span id="score">0</span></div>
        <div class="stat">RC: <span id="rc">0</span></div>
    </div>
    
    <div id="player">üèÉ</div>
    <div id="floor"></div>
</div>

<div id="start-screen" class="overlay">
    <h1 style="font-size: 48px; margin-bottom: 10px;">ECO-VOYAGE</h1>
    <p style="margin-bottom: 30px; font-size: 18px;">Jump over dead trees and collect water drops!<br>(Press Space or Tap to Jump)</p>
    <button onclick="initGame()">START MISSION</button>
</div>

<div id="game-over" class="overlay" style="display: none;">
    <h1 style="color: #ff5252;">MISSION FAILED</h1>
    <p id="final-stats" style="font-size: 20px; margin-bottom: 20px;"></p>
    <button onclick="location.reload()">TRY AGAIN</button>
</div>

<audio id="bg-music" loop src="https://www.chosic.com/wp-content/uploads/2021/07/Rainforest-Ambient.mp3"></audio>

<script>
    let isJumping = false;
    let score = 0;
    let rcCount = 0;
    let gameActive = false;
    let gravity = 0.9;
    let velocity = 0;
    let playerPos = 80;

    const player = document.getElementById('player');
    const container = document.getElementById('game-container');
    const music = document.getElementById('bg-music');

    function initGame() {
        document.getElementById('start-screen').style.display = 'none';
        gameActive = true;
        music.play();
        requestAnimationFrame(gameLoop);
        spawnObstacles();
        spawnItems();
    }

    // Jump Logic
    function jump() {
        if (!isJumping && gameActive) {
            isJumping = true;
            velocity = 15;
        }
    }

    document.addEventListener('keydown', (e) => { if(e.code === 'Space') jump(); });
    container.addEventListener('touchstart', jump);

    function gameLoop() {
        if (!gameActive) return;

        // Physics
        if (isJumping) {
            velocity -= gravity;
            playerPos += velocity;
            if (playerPos <= 80) {
                playerPos = 80;
                isJumping = false;
                velocity = 0;
            }
        }
        player.style.bottom = playerPos + 'px';

        // Score
        score++;
        document.getElementById('score').innerText = Math.floor(score/10);
        
        requestAnimationFrame(gameLoop);
    }

    function spawnObstacles() {
        if (!gameActive) return;
        const obstacle = document.createElement('div');
        obstacle.className = 'obstacle';
        obstacle.innerHTML = 'üåµ';
        obstacle.style.right = '-50px';
        container.appendChild(obstacle);

        let pos = -50;
        const move = setInterval(() => {
            if (!gameActive) { clearInterval(move); obstacle.remove(); return; }
            pos += (6 + score/2000); 
            obstacle.style.right = pos + 'px';

            // Collision Detection
            const pRect = player.getBoundingClientRect();
            const oRect = obstacle.getBoundingClientRect();

            if (pRect.left < oRect.right && pRect.right > oRect.left && pRect.top < oRect.bottom && pRect.bottom > oRect.top) {
                endGame();
            }

            if (pos > window.innerWidth) {
                clearInterval(move);
                obstacle.remove();
            }
        }, 20);

        setTimeout(spawnObstacles, Math.random() * 1500 + 1000);
    }

    function spawnItems() {
        if (!gameActive) return;
        const item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = 'üíß';
        item.style.right = '-50px';
        item.style.bottom = (Math.random() * 150 + 120) + 'px';
        container.appendChild(item);

        let pos = -50;
        const move = setInterval(() => {
            if (!gameActive) { clearInterval(move); item.remove(); return; }
            pos += 5;
            item.style.right = pos + 'px';

            const pRect = player.getBoundingClientRect();
            const iRect = item.getBoundingClientRect();

            if (pRect.left < iRect.right && pRect.right > iRect.left && pRect.top < iRect.bottom && pRect.bottom > iRect.top) {
                rcCount += 5;
                document.getElementById('rc').innerText = rcCount;
                item.remove();
                clearInterval(move);
            }
        }, 20);

        setTimeout(spawnItems, 2000);
    }

    function endGame() {
        gameActive = false;
        music.pause();
        document.getElementById('game-over').style.display = 'flex';
        document.getElementById('final-stats').innerText = `Distance: ${Math.floor(score/10)}m | RC Collected: ${rcCount}`;
    }
</script>
</body>
</html>